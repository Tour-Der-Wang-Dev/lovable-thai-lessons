
<svg viewBox="0 0 1200 800" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .title { font: bold 16px sans-serif; text-anchor: middle; }
      .subtitle { font: 12px sans-serif; text-anchor: middle; }
      .component { font: 11px sans-serif; text-anchor: middle; }
      .small-text { font: 9px sans-serif; text-anchor: middle; }
      .frontend { fill: #3B82F6; }
      .backend { fill: #10B981; }
      .external { fill: #F59E0B; }
      .database { fill: #8B5CF6; }
      .flow { stroke: #6B7280; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#6B7280" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="600" y="30" class="title">Kru English - System Architecture</text>
  
  <!-- Frontend Layer -->
  <rect x="50" y="60" width="500" height="200" rx="10" fill="#EBF4FF" stroke="#3B82F6" stroke-width="2"/>
  <text x="300" y="80" class="subtitle frontend">Frontend Layer (React + TypeScript)</text>
  
  <!-- Main App Components -->
  <rect x="70" y="100" width="100" height="40" rx="5" fill="#3B82F6" opacity="0.8"/>
  <text x="120" y="125" class="component" fill="white">App.tsx</text>
  
  <rect x="180" y="100" width="100" height="40" rx="5" fill="#3B82F6" opacity="0.8"/>
  <text x="230" y="125" class="component" fill="white">Index.tsx</text>
  
  <rect x="290" y="100" width="100" height="40" rx="5" fill="#3B82F6" opacity="0.8"/>
  <text x="340" y="125" class="component" fill="white">Header.tsx</text>
  
  <rect x="400" y="100" width="100" height="40" rx="5" fill="#3B82F6" opacity="0.8"/>
  <text x="450" y="125" class="component" fill="white">AuthModal.tsx</text>
  
  <!-- Page Components -->
  <rect x="70" y="160" width="80" height="35" rx="5" fill="#60A5FA"/>
  <text x="110" y="182" class="small-text" fill="white">Dashboard</text>
  
  <rect x="160" y="160" width="80" height="35" rx="5" fill="#60A5FA"/>
  <text x="200" y="182" class="small-text" fill="white">Courses</text>
  
  <rect x="250" y="160" width="80" height="35" rx="5" fill="#60A5FA"/>
  <text x="290" y="182" class="small-text" fill="white">Live</text>
  
  <rect x="340" y="160" width="80" height="35" rx="5" fill="#60A5FA"/>
  <text x="380" y="182" class="small-text" fill="white">Pricing</text>
  
  <rect x="430" y="160" width="80" height="35" rx="5" fill="#60A5FA"/>
  <text x="470" y="182" class="small-text" fill="white">Profile</text>
  
  <!-- Hooks Layer -->
  <rect x="650" y="60" width="300" height="120" rx="10" fill="#F0FDF4" stroke="#10B981" stroke-width="2"/>
  <text x="800" y="80" class="subtitle backend">React Hooks & Context</text>
  
  <rect x="670" y="100" width="120" height="35" rx="5" fill="#10B981" opacity="0.8"/>
  <text x="730" y="122" class="component" fill="white">useAuth</text>
  
  <rect x="810" y="100" width="120" height="35" rx="5" fill="#10B981" opacity="0.8"/>
  <text x="870" y="122" class="component" fill="white">useLanguage</text>
  
  <rect x="740" y="145" width="120" height="25" rx="5" fill="#34D399"/>
  <text x="800" y="162" class="small-text" fill="white">Toast Management</text>
  
  <!-- Backend Services Layer -->
  <rect x="50" y="300" width="500" height="150" rx="10" fill="#F0FDF4" stroke="#10B981" stroke-width="2"/>
  <text x="300" y="320" class="subtitle backend">Backend Services (Supabase Edge Functions)</text>
  
  <rect x="70" y="340" width="140" height="40" rx="5" fill="#10B981" opacity="0.8"/>
  <text x="140" y="365" class="component" fill="white">check-subscription</text>
  
  <rect x="230" y="340" width="140" height="40" rx="5" fill="#10B981" opacity="0.8"/>
  <text x="300" y="365" class="component" fill="white">create-checkout</text>
  
  <rect x="390" y="340" width="140" height="40" rx="5" fill="#10B981" opacity="0.8"/>
  <text x="460" y="365" class="component" fill="white">customer-portal</text>
  
  <rect x="180" y="395" width="140" height="30" rx="5" fill="#34D399"/>
  <text x="250" y="415" class="small-text" fill="white">Authentication & RLS</text>
  
  <!-- External Services -->
  <rect x="650" y="300" width="300" height="150" rx="10" fill="#FEF3C7" stroke="#F59E0B" stroke-width="2"/>
  <text x="800" y="320" class="subtitle external">External Services</text>
  
  <rect x="670" y="340" width="120" height="40" rx="5" fill="#F59E0B" opacity="0.8"/>
  <text x="730" y="365" class="component" fill="white">Stripe API</text>
  
  <rect x="810" y="340" width="120" height="40" rx="5" fill="#F59E0B" opacity="0.8"/>
  <text x="870" y="365" class="component" fill="white">Supabase Auth</text>
  
  <rect x="740" y="395" width="120" height="30" rx="5" fill="#FCD34D"/>
  <text x="800" y="415" class="small-text">Payment Processing</text>
  
  <!-- Database Layer -->
  <rect x="200" y="500" width="600" height="150" rx="10" fill="#F3E8FF" stroke="#8B5CF6" stroke-width="2"/>
  <text x="500" y="520" class="subtitle database">Database Layer (Supabase PostgreSQL)</text>
  
  <!-- Database Tables -->
  <rect x="220" y="540" width="100" height="30" rx="5" fill="#8B5CF6" opacity="0.8"/>
  <text x="270" y="560" class="small-text" fill="white">subscribers</text>
  
  <rect x="340" y="540" width="100" height="30" rx="5" fill="#8B5CF6" opacity="0.8"/>
  <text x="390" y="560" class="small-text" fill="white">profiles</text>
  
  <rect x="460" y="540" width="100" height="30" rx="5" fill="#8B5CF6" opacity="0.8"/>
  <text x="510" y="560" class="small-text" fill="white">courses</text>
  
  <rect x="580" y="540" width="100" height="30" rx="5" fill="#8B5CF6" opacity="0.8"/>
  <text x="630" y="560" class="small-text" fill="white">live_sessions</text>
  
  <rect x="280" y="585" width="100" height="30" rx="5" fill="#A78BFA"/>
  <text x="330" y="605" class="small-text" fill="white">payments</text>
  
  <rect x="400" y="585" width="100" height="30" rx="5" fill="#A78BFA"/>
  <text x="450" y="605" class="small-text" fill="white">quiz_results</text>
  
  <rect x="520" y="585" width="100" height="30" rx="5" fill="#A78BFA"/>
  <text x="570" y="605" class="small-text" fill="white">subscriptions</text>
  
  <!-- Data Flow Arrows -->
  <!-- Frontend to Hooks -->
  <line x1="300" y1="200" x2="730" y2="100" class="flow"/>
  <line x1="450" y1="140" x2="730" y2="100" class="flow"/>
  
  <!-- Hooks to Backend -->
  <line x1="730" y1="135" x2="300" y2="340" class="flow"/>
  
  <!-- Backend to External Services -->
  <line x1="460" y1="360" x2="730" y2="360" class="flow"/>
  <line x1="300" y1="380" x2="870" y2="340" class="flow"/>
  
  <!-- Backend to Database -->
  <line x1="300" y1="450" x2="500" y2="540" class="flow"/>
  
  <!-- Legend -->
  <rect x="1000" y="500" width="180" height="200" rx="5" fill="#F9FAFB" stroke="#D1D5DB"/>
  <text x="1090" y="520" class="subtitle">Legend</text>
  
  <rect x="1010" y="535" width="15" height="15" fill="#3B82F6"/>
  <text x="1035" y="547" class="small-text">Frontend Components</text>
  
  <rect x="1010" y="560" width="15" height="15" fill="#10B981"/>
  <text x="1035" y="572" class="small-text">Backend Services</text>
  
  <rect x="1010" y="585" width="15" height="15" fill="#F59E0B"/>
  <text x="1035" y="597" class="small-text">External APIs</text>
  
  <rect x="1010" y="610" width="15" height="15" fill="#8B5CF6"/>
  <text x="1035" y="622" class="small-text">Database Tables</text>
  
  <line x1="1010" y1="640" x2="1040" y2="640" class="flow"/>
  <text x="1050" y="645" class="small-text">Data Flow</text>
  
  <!-- Key Features Text -->
  <text x="600" y="750" class="subtitle">Key Features: Multi-language support, Real-time subscriptions, Stripe payments, Live sessions, Course management</text>
</svg>
